<!DOCTYPE html>
<html>
<head>
Signup Form
</head>
<body bgcolor="grey">
	<form  action="database_con.php" method="POST">
	<table border='0' width='480px' cellpadding='0' cellspacing='0' align='center'>
<center><tr>
   <td align="center"><h1>Sign Up</h1></td>
</tr><center>
 
<table border='0' width='480px' cellpadding='0' cellspacing='0' align='center'>
<tr>
    <td align='center'>Full Name:</td>
    <td><input type="text" placeholder="Name" name="username"></td>
</tr>
<tr> <td>&nbsp;</td> </tr>
<tr>
    <td align='center'>E-mail:</td>
    <td><input type="mail" placeholder="Email" name="email"></td>
</tr>
<tr> <td>&nbsp;</td> </tr>
<tr>
    <td align='center'>Password:</td>
    <td><input type="Password" placeholder="Password" name="password"></td>
</tr>
<tr> <td>&nbsp;</td> </tr>
<tr>
    <td align='center'>Date of Birth:</td>
    <td><input type= "text" placeholder="MM/DD/YYYY" name="dob"></td>
</tr>
<tr> <td>&nbsp;</td> </tr>
<tr>
    <td align="center">Gender:</td>
    <td> <input type="radio" name="gender" value="m">Male
    <input type="radio" name="gender" value="f">Female </td>
</tr>
<tr> <td>&nbsp;</td> </tr> 
<table border='0' cellpadding='0' cellspacing='0' width='480px' align='center'>
<tr>
    <td align='center'><input type="Submit" value="Submit" name=""></td>
</tr>
</table>
</table>
 
</table>
</body>
</html>

<?php
	$username=$_POST['username'];
	$email=$_POST['email'];
	$password=$_POST['password'];
	$dob=$_POST['dob'];
	$gender=$_POST['gender'];

	if(!empty($username) || !empty($email) || !empty($password) || !empty($dob) || !empty($gender)){
		$host="localhost";
		$dbUsername="root";
		$dbPassword="";
		$dbname="signup";

		$conn=new mysqli($host,$dbUsername,$dbPassword,$dbname);
		if(mysqli_connect_error()){
			die('Connect Error('.mysqli_connect_err().')'.mysqli_connect_error());
		}else{
				$SELECT="SELECT email From sign_up where email=? Limit 1";
				$INSERT="INSERT into sign_up (username,email,password,dob,gender) values(?,?,?,?,?)";


				$stmt=$conn->prepare($SELECT);
				$stmt->bind_param("s",$email);
				$stmt->execute();
				$stmt->bind_result($email);
				$stmt->store_result();
				$rnum=$stmt->num_rows;

				if($rnum==0){
					$stmt->close();
					$stmt=$conn->prepare($INSERT);
					$stmt->bind_param("sssss",$username,$email,$password,$dob,$gender);
					$stmt->execute();
					echo "Welcome";
		}else{
			echo "Email Already Regestered ";
		}
		$stmt->close();
		$conn->close();

		}
	}else{
		echo "Please fill all data";
		die();
	}

  ?>
